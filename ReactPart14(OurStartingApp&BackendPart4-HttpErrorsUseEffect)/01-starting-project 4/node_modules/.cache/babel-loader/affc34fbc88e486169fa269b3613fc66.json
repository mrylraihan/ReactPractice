{"ast":null,"code":"var _jsxFileName = \"/Volumes/Wallies Extreme SSD/VscodeWorkspaceSSD/VstudioCode/ReactPractice/ReactPart14(OurStartingApp&BackendPart4-HttpErrorsUseEffect)/01-starting-project 4/src/App.js\";\nimport React, { useState } from 'react';\nimport MoviesList from './components/MoviesList';\nimport './App.css';\n\nfunction App() {\n  const [movieList, setMovieList] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  useEffect(() => {});\n\n  async function fetchMoviesHandler() {\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const res = await fetch('https://swapi.dev/api/film/'); // with errors \n      // const res = await fetch('https://swapi.dev/api/films/') no errors\n\n      if (!res.ok) {\n        throw new Error('Something went wrong');\n      }\n\n      const result = await res.json();\n      const transformedMovies = result.results.map(movieData => {\n        return {\n          id: movieData.episode_id,\n          title: movieData.title,\n          openingText: movieData.opening_crawl,\n          releaseDate: movieData.release_date\n        };\n      });\n      setMovieList(transformedMovies); // setIsLoading(false)//this wont stop loading if it errors\n    } catch (error) {\n      console.log(error);\n      setError(error.message);\n    }\n\n    setIsLoading(false); //so regardless if its a good or bad request it will stop loading \n  } //this is a cleaner way to assign what needs to get rendered depending on what our state is\n  //assigning the content to what ever is true and not rendering if anything is false \n\n\n  let content = /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }, \"No movies Found ...\");\n\n  if (movieList.length > 0) {\n    content = /*#__PURE__*/React.createElement(MoviesList, {\n      movies: movieList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 15\n      }\n    });\n  }\n\n  if (isLoading) {\n    content = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 15\n      }\n    }, \"Loading...\");\n  }\n\n  if (error) {\n    content = /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 15\n      }\n    }, error);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: movieList.length > 0 ? setMovieList.bind(this, []) : fetchMoviesHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, \"Fetch Movies\")), /*#__PURE__*/React.createElement(\"section\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, content));\n}\n\nexport default App;","map":{"version":3,"names":["React","useState","MoviesList","App","movieList","setMovieList","isLoading","setIsLoading","error","setError","useEffect","fetchMoviesHandler","res","fetch","ok","Error","result","json","transformedMovies","results","map","movieData","id","episode_id","title","openingText","opening_crawl","releaseDate","release_date","console","log","message","content","length","bind"],"sources":["/Volumes/Wallies Extreme SSD/VscodeWorkspaceSSD/VstudioCode/ReactPractice/ReactPart14(OurStartingApp&BackendPart4-HttpErrorsUseEffect)/01-starting-project 4/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\n\nimport MoviesList from './components/MoviesList';\nimport './App.css';\n\nfunction App() {\n  const [movieList, setMovieList] = useState([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState(null)\n  \n  useEffect(()=>{\n\n  }, )\n  \n  async function fetchMoviesHandler(){\n    setIsLoading(true)\n    setError(null)\n    try{\n      const res = await fetch('https://swapi.dev/api/film/') // with errors \n      // const res = await fetch('https://swapi.dev/api/films/') no errors\n      if (!res.ok) {\n        throw new Error('Something went wrong')\n      }\n      const result = await res.json()\n      \n      const transformedMovies = result.results.map(movieData => {\n        return {\n          id: movieData.episode_id,\n          title: movieData.title,\n          openingText: movieData.opening_crawl,\n          releaseDate: movieData.release_date\n        }\n      })\n      setMovieList(transformedMovies)\n      // setIsLoading(false)//this wont stop loading if it errors\n    }catch(error){\n      console.log(error);\n      setError(error.message)\n    }\n    setIsLoading(false)//so regardless if its a good or bad request it will stop loading \n  \n  }\n\n  //this is a cleaner way to assign what needs to get rendered depending on what our state is\n  //assigning the content to what ever is true and not rendering if anything is false \n  let content = <p>No movies Found ...</p>\n\n  if (movieList.length > 0){\n    content = <MoviesList movies={movieList} />\n  }\n  if(isLoading){\n    content = <p>Loading...</p>\n  }\n\n  if(error){\n    content = <p>{error}</p>\n  }\n\n  return (\n    <React.Fragment>\n      <section>\n        <button onClick={movieList.length>0?setMovieList.bind(this,[]):fetchMoviesHandler}>Fetch Movies</button>\n      </section>\n      <section>\n        {/* this content will replace all those conditionals and checks because its getting assign above to what ever is true */}\n        {content} \n        {/* {!isLoading && movieList.length > 0 && <MoviesList movies={movieList} />}\n        {!isLoading && !error && movieList.length === 0 && <p>Sorry no movies found!</p>}\n        {isLoading && <p>Loading...</p>}\n        {!isLoading && error && <p>{error}</p>} */}\n      </section>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AAEA,OAAOC,UAAP,MAAuB,yBAAvB;AACA,OAAO,WAAP;;AAEA,SAASC,GAAT,GAAe;EACb,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BJ,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACK,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAC,KAAD,CAA1C;EACA,MAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,IAAD,CAAlC;EAEAS,SAAS,CAAC,MAAI,CAEb,CAFQ,CAAT;;EAIA,eAAeC,kBAAf,GAAmC;IACjCJ,YAAY,CAAC,IAAD,CAAZ;IACAE,QAAQ,CAAC,IAAD,CAAR;;IACA,IAAG;MACD,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,6BAAD,CAAvB,CADC,CACsD;MACvD;;MACA,IAAI,CAACD,GAAG,CAACE,EAAT,EAAa;QACX,MAAM,IAAIC,KAAJ,CAAU,sBAAV,CAAN;MACD;;MACD,MAAMC,MAAM,GAAG,MAAMJ,GAAG,CAACK,IAAJ,EAArB;MAEA,MAAMC,iBAAiB,GAAGF,MAAM,CAACG,OAAP,CAAeC,GAAf,CAAmBC,SAAS,IAAI;QACxD,OAAO;UACLC,EAAE,EAAED,SAAS,CAACE,UADT;UAELC,KAAK,EAAEH,SAAS,CAACG,KAFZ;UAGLC,WAAW,EAAEJ,SAAS,CAACK,aAHlB;UAILC,WAAW,EAAEN,SAAS,CAACO;QAJlB,CAAP;MAMD,CAPyB,CAA1B;MAQAvB,YAAY,CAACa,iBAAD,CAAZ,CAhBC,CAiBD;IACD,CAlBD,CAkBC,OAAMV,KAAN,EAAY;MACXqB,OAAO,CAACC,GAAR,CAAYtB,KAAZ;MACAC,QAAQ,CAACD,KAAK,CAACuB,OAAP,CAAR;IACD;;IACDxB,YAAY,CAAC,KAAD,CAAZ,CAzBiC,CAyBd;EAEpB,CApCY,CAsCb;EACA;;;EACA,IAAIyB,OAAO,gBAAG;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,yBAAd;;EAEA,IAAI5B,SAAS,CAAC6B,MAAV,GAAmB,CAAvB,EAAyB;IACvBD,OAAO,gBAAG,oBAAC,UAAD;MAAY,MAAM,EAAE5B,SAApB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAV;EACD;;EACD,IAAGE,SAAH,EAAa;IACX0B,OAAO,gBAAG;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,gBAAV;EACD;;EAED,IAAGxB,KAAH,EAAS;IACPwB,OAAO,gBAAG;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,GAAIxB,KAAJ,CAAV;EACD;;EAED,oBACE,oBAAC,KAAD,CAAO,QAAP;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAQ,OAAO,EAAEJ,SAAS,CAAC6B,MAAV,GAAiB,CAAjB,GAAmB5B,YAAY,CAAC6B,IAAb,CAAkB,IAAlB,EAAuB,EAAvB,CAAnB,GAA8CvB,kBAA/D;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,kBADF,CADF,eAIE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAEGqB,OAFH,CAJF,CADF;AAeD;;AAED,eAAe7B,GAAf"},"metadata":{},"sourceType":"module"}