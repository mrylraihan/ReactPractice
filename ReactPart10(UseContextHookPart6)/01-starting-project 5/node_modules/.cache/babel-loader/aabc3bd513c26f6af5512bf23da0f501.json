{"ast":null,"code":"var _jsxFileName = \"/Volumes/Wallies Extreme SSD/VscodeWorkspaceSSD/VstudioCode/ReactPractice/ReactPart10(UseContextHookPart6)/01-starting-project 5/src/components/Login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useReducer, useContext, useRef } from 'react';\nimport Card from '../UI/Card/Card';\nimport classes from './Login.module.css';\nimport Button from '../UI/Button/Button';\nimport AuthContext from '../../store/auth-context';\nimport Input from '../UI/Input/Input'; // we create this outside of the component because we wont need any data thats generated from the actual component, so the reducer function can be created outside of the scope of the component function, all the data required for the reducer function will passed in by react\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst emailReducer = (state, action) => {\n  if (action.type === 'USER_INPUT') {\n    return {\n      value: action.val,\n      isValid: action.val.includes('@')\n    };\n  }\n\n  if (action.type === 'INPUT_BLUR') {\n    return {\n      value: state.value,\n      isValid: state.value.includes('@')\n    };\n  }\n\n  return {\n    value: '',\n    isValid: false\n  };\n};\n\nconst passwordReducer = (state, action) => {\n  if (action.type === 'USER_INPUT') {\n    return {\n      value: action.val,\n      isValid: action.val.length > 6\n    };\n  }\n\n  if (action.type === 'INPUT_BLUR') {\n    return {\n      value: state.val,\n      isValid: state.value.length > 6\n    };\n  }\n\n  return {\n    value: '',\n    isValid: false\n  };\n};\n\nconst Login = props => {\n  _s();\n\n  // we dont need any of these anymore because we are combining both the state for the input and validation in one\n  // const [enteredEmail, setEnteredEmail] = useState('');\n  // const [emailIsValid, setEmailIsValid] = useState();\n  // const [enteredPassword, setEnteredPassword] = useState('');\n  // const [passwordIsValid, setPasswordIsValid] = useState();\n  const [formIsValid, setFormIsValid] = useState(false);\n  const authCtx = useContext(AuthContext);\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef(); // useReducer for email                       reducerFunction, initial value\n\n  const [emailState, dispatchEmail] = useReducer(emailReducer, {\n    value: '',\n    isValid: false\n  });\n  const [passwordState, dispatchPassword] = useReducer(passwordReducer, {\n    value: '',\n    isValid: false\n  });\n  const {\n    isValid: emailIsValid\n  } = emailState;\n  const {\n    isValid: passwordIsValid\n  } = passwordState;\n  useEffect(() => {\n    console.log('In useEffect');\n    const identifier = setTimeout(() => {\n      setFormIsValid(emailIsValid && passwordIsValid);\n      console.log('in timer');\n    }, 500);\n    return () => {\n      console.log('Clean up!');\n      clearTimeout(identifier);\n    };\n  }, [emailIsValid, passwordIsValid]);\n\n  const emailChangeHandler = event => {\n    dispatchEmail({\n      type: 'USER_INPUT',\n      val: event.target.value\n    }); // setFormIsValid(\n    //   event.target.value.includes('@') && passwordState.isValid\n    // )\n  };\n\n  const passwordChangeHandler = event => {\n    dispatchPassword({\n      type: 'USER_INPUT',\n      val: event.target.value\n    }); // setFormIsValid(\n    //     emailState.isValid && event.target.value.trim().length > 4\n    //   );\n  };\n\n  const validateEmailHandler = () => {\n    // setEmailIsValid(emailState.isValid);\n    dispatchEmail({\n      type: 'INPUT_BLUR'\n    });\n  };\n\n  const validatePasswordHandler = () => {\n    dispatchPassword({\n      type: 'INPUT_BLUR'\n    });\n  };\n\n  const submitHandler = event => {\n    event.preventDefault();\n\n    if (formIsValid) {\n      authCtx.onLogin(emailState.value, passwordState.value);\n    } else if (!emailIsValid) {\n      emailInputRef.current.focus;\n    } else {}\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: classes.login,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        ref: emailInputRef,\n        id: \"email\",\n        label: \"E-Mail\",\n        type: \"email\",\n        isValid: emailIsValid,\n        value: emailState.value,\n        onChange: emailChangeHandler,\n        onBlur: validateEmailHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        ref: passwordInputRef,\n        id: \"password\",\n        label: \"Password\",\n        type: \"password\",\n        isValid: passwordIsValid,\n        value: passwordState.value,\n        onChange: passwordChangeHandler,\n        onBlur: validatePasswordHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.actions,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          className: classes.btn,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"2vxKeeM0PhZoTcsefwuDOuVst/0=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Volumes/Wallies Extreme SSD/VscodeWorkspaceSSD/VstudioCode/ReactPractice/ReactPart10(UseContextHookPart6)/01-starting-project 5/src/components/Login/Login.js"],"names":["React","useState","useEffect","useReducer","useContext","useRef","Card","classes","Button","AuthContext","Input","emailReducer","state","action","type","value","val","isValid","includes","passwordReducer","length","Login","props","formIsValid","setFormIsValid","authCtx","emailInputRef","passwordInputRef","emailState","dispatchEmail","passwordState","dispatchPassword","emailIsValid","passwordIsValid","console","log","identifier","setTimeout","clearTimeout","emailChangeHandler","event","target","passwordChangeHandler","validateEmailHandler","validatePasswordHandler","submitHandler","preventDefault","onLogin","current","focus","login","actions","btn"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useReducer, useContext, useRef } from 'react';\n\nimport Card from '../UI/Card/Card';\nimport classes from './Login.module.css';\nimport Button from '../UI/Button/Button';\nimport AuthContext from '../../store/auth-context';\nimport Input from '../UI/Input/Input'\n\n// we create this outside of the component because we wont need any data thats generated from the actual component, so the reducer function can be created outside of the scope of the component function, all the data required for the reducer function will passed in by react\nconst emailReducer = (state, action) => {\n  if (action.type === 'USER_INPUT') {\n    return { value: action.val, isValid: action.val.includes('@') }\n  }\n  if (action.type === 'INPUT_BLUR') {\n    return { value: state.value, isValid: state.value.includes('@') }\n  }\n  return { value: '', isValid: false }\n};\n\nconst passwordReducer = (state, action) => {\n  if (action.type === 'USER_INPUT') {\n    return { value: action.val, isValid: action.val.length > 6 }\n  }\n  if (action.type === 'INPUT_BLUR') {\n    return { value: state.val, isValid: state.value.length > 6 }\n  }\n  return { value: '', isValid: false }\n}\n\nconst Login = (props) => {\n  // we dont need any of these anymore because we are combining both the state for the input and validation in one\n  // const [enteredEmail, setEnteredEmail] = useState('');\n  // const [emailIsValid, setEmailIsValid] = useState();\n  // const [enteredPassword, setEnteredPassword] = useState('');\n  // const [passwordIsValid, setPasswordIsValid] = useState();\n  const [formIsValid, setFormIsValid] = useState(false);\n  const authCtx = useContext(AuthContext);\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  // useReducer for email                       reducerFunction, initial value\n  const [emailState, dispatchEmail] = useReducer(emailReducer, { value: '', isValid: false })\n  const [passwordState, dispatchPassword] = useReducer(passwordReducer, { value: '', isValid: false })\n\n  const { isValid: emailIsValid } = emailState\n  const { isValid: passwordIsValid } = passwordState\n  useEffect(() => {\n    console.log('In useEffect');\n    const identifier = setTimeout(() => {\n      setFormIsValid(\n        emailIsValid && passwordIsValid\n      );\n      console.log('in timer');\n    }, 500)\n    return () => {\n      console.log('Clean up!');\n      clearTimeout(identifier)\n    }\n  }, [emailIsValid, passwordIsValid])\n\n  const emailChangeHandler = (event) => {\n    dispatchEmail({ type: 'USER_INPUT', val: event.target.value })\n\n    // setFormIsValid(\n    //   event.target.value.includes('@') && passwordState.isValid\n    // )\n  };\n\n  const passwordChangeHandler = (event) => {\n    dispatchPassword({ type: 'USER_INPUT', val: event.target.value })\n\n    // setFormIsValid(\n    //     emailState.isValid && event.target.value.trim().length > 4\n    //   );\n  };\n\n  const validateEmailHandler = () => {\n    // setEmailIsValid(emailState.isValid);\n    dispatchEmail({ type: 'INPUT_BLUR' })\n  };\n\n  const validatePasswordHandler = () => {\n    dispatchPassword({ type: 'INPUT_BLUR' })\n  };\n\n  const submitHandler = (event) => {\n    event.preventDefault();\n    if (formIsValid) {\n      authCtx.onLogin(emailState.value, passwordState.value);\n    } else if (!emailIsValid) {\n      emailInputRef.current.focus\n    } else {\n\n    }\n  };\n\n  return (\n    <Card className={classes.login}>\n      <form onSubmit={submitHandler}>\n        <Input ref={emailInputRef} id='email' label='E-Mail' type='email' isValid={emailIsValid}\n          value={emailState.value} onChange={emailChangeHandler} onBlur={validateEmailHandler}></Input>\n        <Input ref={passwordInputRef} id='password' label='Password' type='password' isValid={passwordIsValid}\n          value={passwordState.value} onChange={passwordChangeHandler} onBlur={validatePasswordHandler}></Input>\n\n        <div className={classes.actions}>\n          <Button type=\"submit\" className={classes.btn} >\n            Login\n          </Button>\n        </div>\n      </form>\n    </Card>\n  );\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}